## GitHub Copilot로 레거시 프로젝트 업그레이드하기

이 문서는 레거시(구버전) Python 애플리케이션을 최신 Python 버전으로 업그레이드하는 과정을 GitHub Copilot의 도움으로 안내합니다.

> [!참고]
> 이 저장소는 **GitHub Copilot**의 다양한 기능(예: Copilot Chat, 인라인 채팅)을 소개하기 위한 것입니다. 아래 단계별 가이드에는 일반적인 설명이 포함되어 있으며, Copilot Chat 또는 인라인 채팅을 활용해 필요한 명령을 생성할 수 있습니다.
>
> 각 단계(해당되는 경우)에는 Copilot 제안 결과를 검증할 수 있는 `Cheatsheet`도 포함되어 있습니다.
>
> 💡 다양한 프롬프트를 시도해 보며 Copilot의 제안 정확도가 어떻게 달라지는지 확인하세요. 예를 들어 인라인 채팅을 사용할 때 추가 프롬프트로 응답을 더 세밀하게 조정할 수 있습니다.

## 워크숍 기능

이 워크숍에서는 Python 2.5 기반의 레거시 애플리케이션을 다룹니다.

1. 모든 의존성은 미리 설치되어 있지만, 레거시 애플리케이션은 구버전 Python을 사용합니다.
2. 애플리케이션은 Sqlite3와 구식 Python 문법을 사용합니다.
3. 레거시 애플리케이션에는 기능 테스트와 단위 테스트가 포함되어 있습니다.

### 1. 에이전트로 프로젝트 탐색

`@workspace` 에이전트를 사용해 프로젝트 구조와 동작을 설명받으세요.
- GitHub Copilot Chat을 열고 프롬프트 앞에 `@workspace`를 붙여 질문하세요.
- 예시: "이 프로젝트는 의존성을 어떻게 설치하나요?"

### 2. 레거시 및 포팅 문제 파악

`pytest`로 테스트를 실행해 어떤 문제가 발생하는지 확인하세요.
- "이 코드를 최신 Python으로 포팅할 때 어떤 문제가 있을까요?" 등 질문
- 가상환경에서 의존성 설치 시도

> [!참고]
> 왜 설치가 안 될 수 있나요? 레거시 Python에서 사용하는 `distribute`는 더 이상 지원되지 않습니다. Copilot에게 다른 설치 방법을 제안받으세요.

### 3. 코드를 upgraded 디렉터리로 복사

모든 코드를 `upgraded` 디렉터리로 복사해 작업하세요.
- 기능 테스트를 활용해 집중할 기능 단위를 정하세요.

> [!참고]
> 비즈니스 로직에 따라 LLM이 모든 컴포넌트를 정확히 설명하지 못할 수 있습니다.

### 4. 프로젝트 설치

가상환경을 만들고 `python setup.py develop`으로 설치를 시도하세요.
- Copilot Chat에 에러를 붙여넣고 원인과 해결책을 질문하세요.
- `#file:setup.py`로 파일을 맥락에 추가하세요.
- 제안대로 오류를 수정하고 설치를 완료하세요.

### 5. 테스트 실행

`pytest`로 단위 테스트를 실행하고 오류를 확인하세요.
- 터미널 출력(`#terminalSelection`)을 Copilot에 붙여넣어 도움을 받으세요.
- Copilot의 답변을 검토하고 추가 질문하세요.
- 아직 코드를 수정하지 마세요.

> [!참고]
> 오류가 바로 이해되지 않을 수 있습니다. Python 버전이 오래되었음을 Copilot에 힌트로 제공하세요.

### 6. try/except 오류 수정

기능 테스트를 활용해 예외 처리 오류를 고치세요.
- Copilot에게 Python 버전을 언급하며 문제 해결을 요청하세요.
- 모든 try/except 오류를 수정하고 테스트를 반복하세요.

> [!참고]
> 예외 외에도 다른 오류가 있을 수 있습니다. 모든 try/except를 먼저 정리하세요.

### 7. ConfigParser 문제 해결

Python 2.5에서 작성된 코드를 Python 3에서 실행할 때 발생하는 ConfigParser 관련 문제를 해결하세요.
- "이 프로젝트는 Python 2.5로 작성되었고, Python 3.9에서 다음과 같은 오류가 발생합니다"라고 질문하며 테스트 출력을 첨부하세요.
- Copilot의 제안 중 하나를 선택해 즉시 적용하고 테스트하세요.
- 모든 테스트가 통과하는지 확인하세요.

> [!참고]
> 테스트가 모두 통과하지 않으면 Copilot에 출력 결과를 붙여넣어 추가 도움을 받으세요.

### 8. 테스트를 Pytest로 포팅

레거시 코드는 `unittest`를 사용합니다. 이를 `pytest`로 변환하세요.
- 테스트 파일에서 `@workspace` 에이전트로 변환 방법을 질문하세요.
- 함수 기반 테스트로 변환을 시도하세요.
- 하나의 테스트를 작성한 뒤 Copilot에게 다음 테스트 생성을 요청하세요.

> [!참고]
> `pytest`는 `unittest` 테스트도 실행할 수 있지만, 더 강력하고 유연하므로 변환하는 것이 좋습니다.

### 9. 최신 패키징 적용

레거시 코드는 `distribute`와 `setuptools`를 사용합니다. 최신 표준인 `pyproject.toml`로 패키징하세요.
- Copilot에게 `pyproject.toml` 작성 방법을 질문하세요.
- `setup.py` 파일을 맥락에 추가하세요.
- Copilot 제안대로 `pyproject.toml`을 작성하고 설치하세요.

> [!참고]
> Python 패키징은 여전히 까다로운 주제입니다. Copilot의 제안이 항상 정확하지 않을 수 있으니 반드시 검증하세요.

### 10. GitHub Actions로 자동화

테스트와 설치 과정을 자동화하는 워크플로우를 만드세요.
- Copilot에게 GitHub Actions 워크플로우 작성 방법을 질문하세요.
- 필요한 파일과 디렉터리를 생성하세요.
- 변경사항을 푸시해 GitHub Actions가 동작하는지 확인하세요.

> [!참고]
> 자동화 구축은 시간이 걸릴 수 있습니다. Copilot을 활용해 오류와 문제를 해결하세요.
